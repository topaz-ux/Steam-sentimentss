<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam ë¦¬ë·° ê°ì • ë¶„ì„</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            margin: 0;
            box-sizing: border-box;
        }
        
        * {
            box-sizing: border-box;
        }
        
        @media (max-width: 768px) {
            .container {
                width: 100%;
                padding: 20px;
            }
            
            .game-search {
                flex-direction: column;
            }
            
            .game-search button {
                width: 100%;
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            width: 95%;
            box-sizing: border-box;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .section {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 18px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 18px;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }
        
        input[type="text"], input[type="number"] {
            min-height: 50px;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-success {
            background: #28a745;
        }

        .status {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .stat-card p {
            color: #666;
            font-size: 0.9em;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .visualization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .vis-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .vis-card h4 {
            margin-bottom: 15px;
            color: #333;
            text-align: center;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-size: 16px;
            line-height: 1.6;
        }

        .info-box strong {
            color: #1976D2;
        }
        
        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .warning-box strong {
            color: #856404;
        }
        
        .cors-warning {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            font-size: 16px;
            line-height: 1.6;
            display: none;
        }
        
        .cors-warning strong {
            color: #721c24;
        }
        
        .cors-warning.show {
            display: block;
        }

        .game-search {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 15px;
        }

        .game-search input {
            width: 100%;
            padding: 20px;
            font-size: 18px;
            min-height: 60px;
        }

        .game-search button {
            width: 100%;
            padding: 20px 30px;
            white-space: nowrap;
            font-size: 18px;
            min-height: 60px;
        }

        .popular-games {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .game-chip {
            background: white;
            padding: 10px 15px;
            border-radius: 20px;
            border: 2px solid #667eea;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .game-chip:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .search-result-item {
            padding: 12px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-result-item:hover {
            background: #e7f3ff;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .search-result-item h5 {
            margin: 0 0 5px 0;
            color: #333;
            font-size: 1em;
        }

        .search-result-item p {
            margin: 0;
            color: #666;
            font-size: 0.85em;
        }

        .search-loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .sentiment-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .sentiment-positive {
            background: #d4edda;
            color: #155724;
        }

        .sentiment-negative {
            background: #f8d7da;
            color: #721c24;
        }

        .sentiment-neutral {
            background: #fff3cd;
            color: #856404;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® Steam ë¦¬ë·° ê°ì • ë¶„ì„</h1>
        <p class="subtitle">Steam ê²Œì„ ë¦¬ë·°ë¥¼ ìŠ¤í¬ë˜í•‘í•˜ê³  ê°ì • ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤</p>

        <!-- ê²Œì„ ê²€ìƒ‰ ì„¹ì…˜ -->
        <div class="section">
            <h2>1ï¸âƒ£ ê²Œì„ ê²€ìƒ‰ ë° ì„ íƒ</h2>
            <div class="info-box">
                <strong>ğŸ’¡ íŒ:</strong> Steam ìŠ¤í† ì–´ í˜ì´ì§€ URLì—ì„œ ê²Œì„ IDë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                ì˜ˆ: <code>https://store.steampowered.com/app/730/</code> â†’ ê²Œì„ IDëŠ” <strong>730</strong>
            </div>
            
            <div class="form-group">
                <label for="game_search">ê²Œì„ ê²€ìƒ‰ (Steam ê²Œì„ ID ë˜ëŠ” ê²Œì„ ì´ë¦„):</label>
                <div class="game-search">
                    <input type="text" id="game_search" placeholder="ê²Œì„ ID ì…ë ¥ (ì˜ˆ: 730) ë˜ëŠ” ê²Œì„ ì´ë¦„ ê²€ìƒ‰" onkeypress="handleSearchKeyPress(event)">
                    <button class="btn" onclick="searchGame()">ê²€ìƒ‰</button>
                </div>
                <div id="search-results" style="display: none; margin-top: 15px;">
                    <div style="background: white; border-radius: 10px; padding: 15px; max-height: 400px; overflow-y: auto; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                        <h4 style="margin-bottom: 10px; color: #333;">ê²€ìƒ‰ ê²°ê³¼:</h4>
                        <div id="search-results-list"></div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>ì¸ê¸° ê²Œì„ (í´ë¦­í•˜ì—¬ ì„ íƒ):</label>
                <div class="popular-games">
                    <div class="game-chip" onclick="selectGame('730', 'Counter Strike 2')">Counter Strike 2</div>
                    <div class="game-chip" onclick="selectGame('271590', 'Grand Theft Auto V')">GTA V</div>
                    <div class="game-chip" onclick="selectGame('1174180', 'Red Dead Redemption 2')">RDR2</div>
                    <div class="game-chip" onclick="selectGame('1091500', 'Cyberpunk 2077')">Cyberpunk 2077</div>
                    <div class="game-chip" onclick="selectGame('570', 'Dota 2')">Dota 2</div>
                    <div class="game-chip" onclick="selectGame('440', 'Team Fortress 2')">Team Fortress 2</div>
                    <div class="game-chip" onclick="selectGame('252490', 'Rust')">Rust</div>
                    <div class="game-chip" onclick="selectGame('1245620', 'ELDEN RING')">ELDEN RING</div>
                </div>
            </div>

            <div class="form-group">
                <label for="game_id">Steam ê²Œì„ ID:</label>
                <input type="text" id="game_id" value="730" placeholder="ì˜ˆ: 730" readonly>
            </div>
            <div class="form-group">
                <label for="game_name">ê²Œì„ ì´ë¦„:</label>
                <input type="text" id="game_name" value="Counter Strike 2" placeholder="ê²Œì„ ì´ë¦„" readonly>
            </div>
            <div class="form-group">
                <label for="num_reviews">ìˆ˜ì§‘í•  ë¦¬ë·° ìˆ˜:</label>
                <input type="number" id="num_reviews" value="50" min="10" max="500">
            </div>
            <button class="btn" onclick="startAnalysis()">ë¦¬ë·° ë¶„ì„ ì‹œì‘</button>
            <div id="scrape-status" class="status"></div>
            <div id="scrape-loading" class="loading">
                <div class="spinner"></div>
                <p>ë¦¬ë·°ë¥¼ ìˆ˜ì§‘í•˜ê³  ë¶„ì„í•˜ëŠ” ì¤‘ì…ë‹ˆë‹¤... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
            </div>
        </div>

        <!-- ê²°ê³¼ ì„¹ì…˜ (ì²˜ìŒì—ëŠ” ìˆ¨ê¹€) -->
        <div id="results-section" class="section" style="display: none;">
            <h2>ğŸ“Š ë¶„ì„ ê²°ê³¼</h2>
            <div id="stats-container">
                <div class="stats-grid" id="stats-grid"></div>
            </div>
        </div>

        <!-- ì‹œê°í™” ì„¹ì…˜ -->
        <div id="visualization-section" class="section" style="display: none;">
            <h2>ğŸ“ˆ ë°ì´í„° ì‹œê°í™”</h2>
            <div class="visualization-grid" id="visualization-grid"></div>
        </div>

        <!-- ìƒ˜í”Œ ë°ì´í„° ì„¹ì…˜ -->
        <div id="data-section" class="section" style="display: none;">
            <h2>ğŸ“‹ ë¦¬ë·° ë°ì´í„° ìƒ˜í”Œ</h2>
            <div id="data-table-container"></div>
        </div>

        <!-- CORS ê²½ê³  (ë™ì  í‘œì‹œ) -->
        <div id="cors-warning" class="cors-warning">
            <strong>âš ï¸ CORS ì œí•œ ê°ì§€:</strong> ë¸Œë¼ìš°ì €ì˜ CORS ì •ì±…ìœ¼ë¡œ ì¸í•´ Steam API í˜¸ì¶œì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
            <strong>í•´ê²° ë°©ë²•:</strong> ë¡œì»¬ì—ì„œ Flask ì•±ì„ ì‹¤í–‰í•˜ì„¸ìš”:
            <pre style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin-top: 10px; overflow-x: auto;"><code>python app.py</code></pre>
            ê·¸ í›„ <code>http://localhost:5000</code>ìœ¼ë¡œ ì ‘ì†í•˜ì‹œë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.
        </div>

        <!-- ì•ˆë‚´ ì„¹ì…˜ -->
        <div class="section">
            <h2>â„¹ï¸ ì‚¬ìš© ì•ˆë‚´</h2>
            <div class="info-box">
                <strong>ì‹¤ì œ ì„œë¹„ìŠ¤:</strong> ì´ í˜ì´ì§€ëŠ” ì‹¤ì œ Steam APIë¥¼ í˜¸ì¶œí•˜ì—¬ ë¦¬ë·°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
            </div>
            
            <div class="warning-box">
                <strong>âš ï¸ CORS ì œí•œ:</strong> ì¼ë¶€ ë¸Œë¼ìš°ì €ì—ì„œëŠ” CORS ì •ì±…ìœ¼ë¡œ ì¸í•´ ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                <strong>í•´ê²° ë°©ë²•:</strong> ì´ ê²½ìš° ë¡œì»¬ì—ì„œ <code>python app.py</code>ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”. 
                í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œ í›„ <code>http://localhost:5000</code>ìœ¼ë¡œ ì ‘ì†í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
                <pre style="background: #fff; padding: 15px; border-radius: 5px; margin-top: 10px; overflow-x: auto; border: 1px solid #ddd;"><code>python app.py</code></pre>
            </div>
            
            <div class="warning-box">
                <strong>ğŸ“Š ê°ì • ë¶„ì„:</strong> í˜„ì¬ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ê°„ë‹¨í•œ ê°ì • ë¶„ì„ ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.<br>
                <strong>ë” ì •í™•í•œ ë¶„ì„:</strong> ë” ì •í™•í•œ ë¶„ì„ì„ ì›í•˜ì‹œë©´ ë¡œì»¬ Flask ì•±ì„ ì‚¬ìš©í•˜ì„¸ìš”. 
                Flask ì•±ì€ ì„œë²„ ì‚¬ì´ë“œì—ì„œ NLTK VADERë¥¼ ì‚¬ìš©í•˜ì—¬ ë” ì •í™•í•œ ê°ì • ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
                <pre style="background: #fff; padding: 15px; border-radius: 5px; margin-top: 10px; overflow-x: auto; border: 1px solid #ddd;"><code>python app.py</code></pre>
            </div>
        </div>
    </div>

    <script>
        // ê²Œì„ ì„ íƒ í•¨ìˆ˜
        function selectGame(gameId, gameName) {
            document.getElementById('game_id').value = gameId;
            document.getElementById('game_name').value = gameName;
            document.getElementById('game_search').value = gameName;
        }

        // Enter í‚¤ ì²˜ë¦¬
        function handleSearchKeyPress(event) {
            if (event.key === 'Enter') {
                searchGame();
            }
        }

        // Steam Store Search APIë¥¼ ì‚¬ìš©í•œ ê²Œì„ ê²€ìƒ‰
        async function searchSteamGames(searchTerm) {
            const resultsDiv = document.getElementById('search-results');
            const resultsList = document.getElementById('search-results-list');
            
            // ê²€ìƒ‰ ê²°ê³¼ ì˜ì—­ í‘œì‹œ
            resultsDiv.style.display = 'block';
            resultsList.innerHTML = '<div class="search-loading">ê²€ìƒ‰ ì¤‘...</div>';

            try {
                // Steam Store Search API URL
                const searchUrl = `https://store.steampowered.com/api/storesearch/?term=${encodeURIComponent(searchTerm)}&l=korean&cc=KR`;
                
                // CORS í”„ë¡ì‹œ ì‚¬ìš©
                const proxies = [
                    `https://api.allorigins.win/raw?url=`,
                    `https://corsproxy.io/?`,
                    `https://api.codetabs.com/v1/proxy?quest=`
                ];
                
                let data = null;
                
                // ì§ì ‘ í˜¸ì¶œ ì‹œë„
                try {
                    const response = await fetch(searchUrl, {
                        method: 'GET',
                        headers: {
                            'Accept': 'application/json',
                        },
                        mode: 'cors'
                    });
                    
                    if (response.ok) {
                        data = await response.json();
                    }
                } catch (e) {
                    console.log('ì§ì ‘ í˜¸ì¶œ ì‹¤íŒ¨, í”„ë¡ì‹œ ì‹œë„:', e);
                }
                
                // í”„ë¡ì‹œ ì‚¬ìš©
                if (!data) {
                    for (const proxy of proxies) {
                        try {
                            const proxyUrl = proxy + encodeURIComponent(searchUrl);
                            const response = await fetch(proxyUrl, {
                                method: 'GET',
                                headers: {
                                    'Accept': 'application/json',
                                }
                            });
                            
                            if (response.ok) {
                                const text = await response.text();
                                data = JSON.parse(text);
                                break;
                            }
                        } catch (e) {
                            console.log(`í”„ë¡ì‹œ ${proxy} ì‹¤íŒ¨:`, e);
                            continue;
                        }
                    }
                }
                
                if (data && data.items && data.items.length > 0) {
                    displaySearchResults(data.items);
                } else {
                    resultsList.innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ê²Œì„ IDë¥¼ ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜ ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.</div>';
                }
            } catch (error) {
                console.error('ê²€ìƒ‰ ì˜¤ë¥˜:', error);
                resultsList.innerHTML = '<div style="padding: 20px; text-align: center; color: #e74c3c;">ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ê²Œì„ IDë¥¼ ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜ ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</div>';
            }
        }

        // ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ
        function displaySearchResults(games) {
            const resultsList = document.getElementById('search-results-list');
            resultsList.innerHTML = '';
            
            // ìµœëŒ€ 10ê°œë§Œ í‘œì‹œ
            const displayGames = games.slice(0, 10);
            
            displayGames.forEach(game => {
                const gameId = game.id || game.appid;
                const gameName = game.name || 'ì´ë¦„ ì—†ìŒ';
                const gamePrice = game.price_string || 'ê°€ê²© ì •ë³´ ì—†ìŒ';
                
                const item = document.createElement('div');
                item.className = 'search-result-item';
                item.onclick = () => {
                    selectGame(gameId, gameName);
                    document.getElementById('search-results').style.display = 'none';
                };
                
                item.innerHTML = `
                    <h5>${gameName}</h5>
                    <p>ê²Œì„ ID: ${gameId} | ${gamePrice}</p>
                `;
                
                resultsList.appendChild(item);
            });
            
            if (games.length > 10) {
                const moreInfo = document.createElement('div');
                moreInfo.style.cssText = 'padding: 10px; text-align: center; color: #666; font-size: 0.9em;';
                moreInfo.textContent = `ì´ ${games.length}ê°œ ê²°ê³¼ ì¤‘ 10ê°œë§Œ í‘œì‹œë©ë‹ˆë‹¤.`;
                resultsList.appendChild(moreInfo);
            }
        }

        // ê²Œì„ ê²€ìƒ‰ í•¨ìˆ˜
        async function searchGame() {
            const searchTerm = document.getElementById('game_search').value.trim();
            if (!searchTerm) {
                alert('ê²Œì„ ID ë˜ëŠ” ê²Œì„ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            // ìˆ«ìë§Œ ì…ë ¥ëœ ê²½ìš° ê²Œì„ IDë¡œ ê°„ì£¼
            if (/^\d+$/.test(searchTerm)) {
                // ê²Œì„ IDë¡œ ì§ì ‘ ê²€ìƒ‰ (ê²Œì„ ì •ë³´ ê°€ì ¸ì˜¤ê¸°)
                try {
                    const gameInfoUrl = `https://store.steampowered.com/api/appdetails?appids=${searchTerm}&l=korean`;
                    const proxies = [
                        `https://api.allorigins.win/raw?url=`,
                        `https://corsproxy.io/?`,
                        `https://api.codetabs.com/v1/proxy?quest=`
                    ];
                    
                    let data = null;
                    
                    // ì§ì ‘ í˜¸ì¶œ ì‹œë„
                    try {
                        const response = await fetch(gameInfoUrl, {
                            method: 'GET',
                            headers: { 'Accept': 'application/json' },
                            mode: 'cors'
                        });
                        if (response.ok) {
                            data = await response.json();
                        }
                    } catch (e) {
                        console.log('ì§ì ‘ í˜¸ì¶œ ì‹¤íŒ¨, í”„ë¡ì‹œ ì‹œë„');
                    }
                    
                    // í”„ë¡ì‹œ ì‚¬ìš©
                    if (!data) {
                        for (const proxy of proxies) {
                            try {
                                const proxyUrl = proxy + encodeURIComponent(gameInfoUrl);
                                const response = await fetch(proxyUrl);
                                if (response.ok) {
                                    const text = await response.text();
                                    data = JSON.parse(text);
                                    break;
                                }
                            } catch (e) {
                                continue;
                            }
                        }
                    }
                    
                    if (data && data[searchTerm] && data[searchTerm].success) {
                        const gameData = data[searchTerm].data;
                        selectGame(searchTerm, gameData.name || `Game ID: ${searchTerm}`);
                        document.getElementById('search-results').style.display = 'none';
                    } else {
                        // ê²Œì„ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìœ¼ë©´ IDë§Œ ì„¤ì •
                        document.getElementById('game_id').value = searchTerm;
                        document.getElementById('game_name').value = `Game ID: ${searchTerm}`;
                        document.getElementById('search-results').style.display = 'none';
                    }
                } catch (error) {
                    // ì˜¤ë¥˜ ë°œìƒ ì‹œ IDë§Œ ì„¤ì •
                    document.getElementById('game_id').value = searchTerm;
                    document.getElementById('game_name').value = `Game ID: ${searchTerm}`;
                    document.getElementById('search-results').style.display = 'none';
                }
            } else {
                // ê²Œì„ ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰
                await searchSteamGames(searchTerm);
            }
        }

        // CORS ê²½ê³  í‘œì‹œ í•¨ìˆ˜
        function showCorsWarning() {
            const corsWarning = document.getElementById('cors-warning');
            if (corsWarning) {
                corsWarning.classList.add('show');
                // í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                corsWarning.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }

        // Steam APIì—ì„œ ë¦¬ë·° ê°€ì ¸ì˜¤ê¸°
        async function fetchSteamReviews(gameId, numReviews) {
            const reviews = [];
            let cursor = '*';
            const maxPages = Math.ceil(numReviews / 100) + 1;
            let corsErrorDetected = false;
            
            for (let page = 0; page < maxPages && reviews.length < numReviews; page++) {
                try {
                    // CORS í”„ë¡ì‹œ ì‚¬ìš© (ì—¬ëŸ¬ ì˜µì…˜ ì‹œë„)
                    const proxies = [
                        `https://api.allorigins.win/raw?url=`,
                        `https://corsproxy.io/?`,
                        `https://api.codetabs.com/v1/proxy?quest=`
                    ];
                    
                    const url = `https://store.steampowered.com/appreviews/${gameId}?json=1&cursor=${encodeURIComponent(cursor)}&num_per_page=100&filter=all&language=all`;
                    
                    let response = null;
                    let data = null;
                    let corsError = false;
                    
                    // ì§ì ‘ í˜¸ì¶œ ì‹œë„
                    try {
                        response = await fetch(url, {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/json',
                            },
                            mode: 'cors'
                        });
                        
                        if (response.ok) {
                            data = await response.json();
                        }
                    } catch (e) {
                        // CORS ì˜¤ë¥˜ ê°ì§€
                        if (e.name === 'TypeError' && (e.message.includes('Failed to fetch') || e.message.includes('CORS'))) {
                            corsError = true;
                            corsErrorDetected = true;
                        }
                        console.log('ì§ì ‘ í˜¸ì¶œ ì‹¤íŒ¨, í”„ë¡ì‹œ ì‹œë„:', e);
                    }
                    
                    // í”„ë¡ì‹œ ì‚¬ìš©
                    if (!data) {
                        let proxySuccess = false;
                        for (const proxy of proxies) {
                            try {
                                const proxyUrl = proxy + encodeURIComponent(url);
                                response = await fetch(proxyUrl, {
                                    method: 'GET',
                                    headers: {
                                        'Accept': 'application/json',
                                    }
                                });
                                
                                if (response.ok) {
                                    const text = await response.text();
                                    data = JSON.parse(text);
                                    proxySuccess = true;
                                    break;
                                }
                            } catch (e) {
                                console.log(`í”„ë¡ì‹œ ${proxy} ì‹¤íŒ¨:`, e);
                                continue;
                            }
                        }
                        
                        // ëª¨ë“  í”„ë¡ì‹œê°€ ì‹¤íŒ¨í•œ ê²½ìš° CORS ì˜¤ë¥˜ë¡œ ê°„ì£¼
                        if (!proxySuccess && !corsError) {
                            corsErrorDetected = true;
                        }
                    }
                    
                    if (data && data.reviews && data.reviews.length > 0) {
                        for (const review of data.reviews) {
                            if (reviews.length >= numReviews) break;
                            
                            const reviewText = review.review || '';
                            if (reviewText.trim().length > 0) {
                                const sentiment = analyzeSentiment(reviewText);
                                reviews.push({
                                    text: reviewText,
                                    recommended: review.voted_up || false,
                                    playtime: (review.author && review.author.playtime_at_review) ? 
                                             (review.author.playtime_at_review / 60).toFixed(1) : 0,
                                    date: review.timestamp_created ? 
                                         new Date(review.timestamp_created * 1000).toISOString().split('T')[0] : '',
                                    sentiment: sentiment.label,
                                    score: sentiment.score
                                });
                            }
                        }
                        
                        cursor = data.cursor || '*';
                        if (!cursor || cursor === '*' || cursor === data.cursor) {
                            break;
                        }
                    } else {
                        break;
                    }
                    
                    // API í˜¸ì¶œ ì œí•œì„ ìœ„í•œ ëŒ€ê¸°
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                } catch (error) {
                    console.error(`í˜ì´ì§€ ${page + 1} ì˜¤ë¥˜:`, error);
                    // CORS ì˜¤ë¥˜ì¸ì§€ í™•ì¸
                    if (error.name === 'TypeError' && (error.message.includes('Failed to fetch') || error.message.includes('CORS'))) {
                        corsErrorDetected = true;
                    }
                    break;
                }
            }
            
            // CORS ì˜¤ë¥˜ê°€ ê°ì§€ë˜ì—ˆê³  ë¦¬ë·°ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í•œ ê²½ìš° ê²½ê³  í‘œì‹œ
            if (corsErrorDetected && reviews.length === 0) {
                showCorsWarning();
            }
            
            return reviews;
        }

        // ê°„ë‹¨í•œ ê°ì • ë¶„ì„ (VADER ê¸°ë°˜ ê°„ë‹¨ ë²„ì „)
        function analyzeSentiment(text) {
            const positiveWords = ['great', 'amazing', 'excellent', 'wonderful', 'fantastic', 'love', 'best', 'good', 'awesome', 'perfect', 'fun', 'enjoy', 'recommend', 'brilliant', 'outstanding'];
            const negativeWords = ['terrible', 'awful', 'horrible', 'bad', 'worst', 'hate', 'disappoint', 'boring', 'broken', 'bug', 'waste', 'poor', 'trash', 'garbage', 'unplayable'];
            const intensifiers = ['very', 'extremely', 'really', 'absolutely', 'incredibly', 'totally'];
            
            const lowerText = text.toLowerCase();
            let score = 0;
            
            // ê¸ì • ë‹¨ì–´ ì²´í¬
            positiveWords.forEach(word => {
                const regex = new RegExp(`\\b${word}\\w*\\b`, 'gi');
                const matches = lowerText.match(regex);
                if (matches) {
                    let wordScore = 0.5;
                    // ê°•ì¡°ì–´ í™•ì¸
                    const beforeWord = lowerText.substring(Math.max(0, lowerText.indexOf(word) - 20), lowerText.indexOf(word));
                    if (intensifiers.some(i => beforeWord.includes(i))) {
                        wordScore = 0.8;
                    }
                    // ë¶€ì •ì–´ í™•ì¸
                    if (/\b(not|no|never|don't|doesn't|isn't|aren't)\b/.test(beforeWord)) {
                        wordScore = -0.3;
                    }
                    score += wordScore * matches.length;
                }
            });
            
            // ë¶€ì • ë‹¨ì–´ ì²´í¬
            negativeWords.forEach(word => {
                const regex = new RegExp(`\\b${word}\\w*\\b`, 'gi');
                const matches = lowerText.match(regex);
                if (matches) {
                    let wordScore = -0.5;
                    // ê°•ì¡°ì–´ í™•ì¸
                    const beforeWord = lowerText.substring(Math.max(0, lowerText.indexOf(word) - 20), lowerText.indexOf(word));
                    if (intensifiers.some(i => beforeWord.includes(i))) {
                        wordScore = -0.8;
                    }
                    // ë¶€ì •ì–´ í™•ì¸ (ì´ì¤‘ ë¶€ì • = ê¸ì •)
                    if (/\b(not|no|never|don't|doesn't|isn't|aren't)\b/.test(beforeWord)) {
                        wordScore = 0.3;
                    }
                    score += wordScore * matches.length;
                }
            });
            
            // ê°íƒ„í‘œì™€ ëŒ€ë¬¸ì í™•ì¸
            const exclamationCount = (text.match(/!/g) || []).length;
            const capsCount = (text.match(/[A-Z]{2,}/g) || []).length;
            score += (exclamationCount * 0.1) + (capsCount * 0.05);
            
            // ì ìˆ˜ ì •ê·œí™” (-1 ~ 1)
            score = Math.max(-1, Math.min(1, score / 5));
            
            // ë ˆì´ë¸” ê²°ì •
            let label = 'neutral';
            if (score > 0.1) label = 'positive';
            else if (score < -0.1) label = 'negative';
            
            return { score, label };
        }

        // ë¶„ì„ ì‹œì‘ í•¨ìˆ˜
        async function startAnalysis() {
            const gameId = document.getElementById('game_id').value;
            const gameName = document.getElementById('game_name').value;
            const numReviews = parseInt(document.getElementById('num_reviews').value) || 50;

            if (!gameId) {
                alert('ê²Œì„ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            const statusDiv = document.getElementById('scrape-status');
            const loadingDiv = document.getElementById('scrape-loading');
            const resultsSection = document.getElementById('results-section');
            const visualizationSection = document.getElementById('visualization-section');
            const dataSection = document.getElementById('data-section');

            // ë¡œë”© í‘œì‹œ
            loadingDiv.style.display = 'block';
            statusDiv.style.display = 'none';
            statusDiv.className = 'status info';
            statusDiv.textContent = `Steam APIì—ì„œ ë¦¬ë·°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...`;
            statusDiv.style.display = 'block';
            resultsSection.style.display = 'none';
            visualizationSection.style.display = 'none';
            dataSection.style.display = 'none';

            try {
                // ì‹¤ì œ Steam APIì—ì„œ ë¦¬ë·° ê°€ì ¸ì˜¤ê¸°
                const reviews = await fetchSteamReviews(gameId, numReviews);
                
                if (reviews.length === 0) {
                    throw new Error('ë¦¬ë·°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê²Œì„ IDë¥¼ í™•ì¸í•˜ê±°ë‚˜ ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                }
                
                // í†µê³„ ê³„ì‚°
                const recommended = reviews.filter(r => r.recommended).length;
                const positive = reviews.filter(r => r.sentiment === 'positive').length;
                const negative = reviews.filter(r => r.sentiment === 'negative').length;
                const neutral = reviews.filter(r => r.sentiment === 'neutral').length;
                const avgScore = reviews.reduce((sum, r) => sum + r.score, 0) / reviews.length;
                const recommendedAvg = reviews.filter(r => r.recommended).length > 0 ?
                    reviews.filter(r => r.recommended).reduce((sum, r) => sum + r.score, 0) / recommended : 0;
                const notRecommendedAvg = reviews.filter(r => !r.recommended).length > 0 ?
                    reviews.filter(r => !r.recommended).reduce((sum, r) => sum + r.score, 0) / (reviews.length - recommended) : 0;
                
                const data = {
                    gameName,
                    totalReviews: reviews.length,
                    recommended,
                    notRecommended: reviews.length - recommended,
                    positive,
                    negative,
                    neutral,
                    avgScore,
                    recommendedAvg,
                    notRecommendedAvg,
                    reviews: reviews.slice(0, 20) // ì²˜ìŒ 20ê°œë§Œ í‘œì‹œ
                };
                
                // ê²°ê³¼ í‘œì‹œ
                displayResults(data);
                
                // ë¡œë”© ìˆ¨ê¹€
                loadingDiv.style.display = 'none';
                statusDiv.className = 'status success';
                statusDiv.textContent = `âœ… ${reviews.length}ê°œì˜ ì‹¤ì œ Steam ë¦¬ë·° ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!`;
                statusDiv.style.display = 'block';
                
            } catch (error) {
                console.error('ì˜¤ë¥˜:', error);
                loadingDiv.style.display = 'none';
                statusDiv.className = 'status error';
                
                // CORS ì˜¤ë¥˜ì¸ì§€ í™•ì¸
                const isCorsError = error.message.includes('Failed to fetch') || 
                                   error.message.includes('CORS') || 
                                   error.message.includes('NetworkError') ||
                                   (error.name === 'TypeError' && error.message.includes('fetch'));
                
                if (isCorsError) {
                    statusDiv.textContent = `âŒ CORS ì˜¤ë¥˜: ë¸Œë¼ìš°ì €ì˜ CORS ì •ì±…ìœ¼ë¡œ ì¸í•´ Steam APIë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\ní•´ê²° ë°©ë²•: ë¡œì»¬ Flask ì•±(python app.py)ì„ ì‹¤í–‰í•˜ì„¸ìš”.`;
                    showCorsWarning();
                } else {
                    statusDiv.textContent = `âŒ ì˜¤ë¥˜: ${error.message}\n\nì°¸ê³ : CORS ì œí•œìœ¼ë¡œ ì¸í•´ ì¼ë¶€ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì‘ë™í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¡œì»¬ Flask ì•±(python app.py)ì„ ì‚¬ìš©í•˜ì‹œë©´ ë” ì•ˆì •ì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.`;
                }
                
                statusDiv.style.display = 'block';
                
                // ì‹¤íŒ¨ ì‹œ ìƒ˜í”Œ ë°ì´í„°ë¡œ í´ë°±
                const sampleData = generateSampleData(gameName, numReviews);
                displayResults(sampleData);
            }
        }

        // ìƒ˜í”Œ ë°ì´í„° ìƒì„±
        function generateSampleData(gameName, numReviews) {
            const reviews = [];
            const sentiments = [
                { text: 'Great game! I love playing this with my friends. The graphics are amazing and the gameplay is smooth.', recommended: true, sentiment: 'positive', score: 0.847, playtime: 150.5 },
                { text: 'This game is terrible. Too many bugs and the servers are always down. Waste of money.', recommended: false, sentiment: 'negative', score: -0.624, playtime: 5.2 },
                { text: 'Decent game but needs more content. The mechanics are okay but gets boring after a while.', recommended: true, sentiment: 'neutral', score: 0.102, playtime: 45.0 },
                { text: 'Amazing experience! Best game I have played in years. Highly recommend to everyone.', recommended: true, sentiment: 'positive', score: 0.921, playtime: 300.0 },
                { text: 'Not worth the price. The game is broken and the developers dont care about fixing it.', recommended: false, sentiment: 'negative', score: -0.756, playtime: 10.5 },
                { text: 'Fun game with great mechanics. The community is active and the updates are regular.', recommended: true, sentiment: 'positive', score: 0.654, playtime: 120.0 },
                { text: 'Average game. Nothing special but not bad either. Worth it if on sale.', recommended: true, sentiment: 'neutral', score: 0.023, playtime: 30.0 },
                { text: 'Horrible experience. Crashes constantly and the support is non-existent.', recommended: false, sentiment: 'negative', score: -0.812, playtime: 2.5 }
            ];

            for (let i = 0; i < numReviews; i++) {
                const template = reviews[i % reviews.length] || sentiments[i % sentiments.length];
                reviews.push({
                    ...template,
                    id: i + 1,
                    date: new Date(2024, 11, Math.floor(Math.random() * 30) + 1).toISOString().split('T')[0]
                });
            }

            // í†µê³„ ê³„ì‚°
            const recommended = reviews.filter(r => r.recommended).length;
            const positive = reviews.filter(r => r.sentiment === 'positive').length;
            const negative = reviews.filter(r => r.sentiment === 'negative').length;
            const neutral = reviews.filter(r => r.sentiment === 'neutral').length;
            const avgScore = reviews.reduce((sum, r) => sum + r.score, 0) / reviews.length;
            const recommendedAvg = reviews.filter(r => r.recommended).reduce((sum, r) => sum + r.score, 0) / recommended;
            const notRecommendedAvg = reviews.filter(r => !r.recommended).reduce((sum, r) => sum + r.score, 0) / (reviews.length - recommended);

            return {
                gameName,
                totalReviews: reviews.length,
                recommended,
                notRecommended: reviews.length - recommended,
                positive,
                negative,
                neutral,
                avgScore,
                recommendedAvg,
                notRecommendedAvg,
                reviews: reviews.slice(0, 10) // ìƒ˜í”Œë§Œ í‘œì‹œ
            };
        }

        // ê²°ê³¼ í‘œì‹œ
        function displayResults(data) {
            // í†µê³„ í‘œì‹œ
            const statsGrid = document.getElementById('stats-grid');
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <h3>${data.totalReviews}</h3>
                    <p>ì „ì²´ ë¦¬ë·°</p>
                </div>
                <div class="stat-card">
                    <h3>${data.recommended}</h3>
                    <p>ì¶”ì²œ ë¦¬ë·° (${(data.recommended/data.totalReviews*100).toFixed(1)}%)</p>
                </div>
                <div class="stat-card">
                    <h3>${data.notRecommended}</h3>
                    <p>ë¹„ì¶”ì²œ ë¦¬ë·° (${(data.notRecommended/data.totalReviews*100).toFixed(1)}%)</p>
                </div>
                <div class="stat-card">
                    <h3>${data.avgScore.toFixed(3)}</h3>
                    <p>í‰ê·  ê°ì • ì ìˆ˜</p>
                </div>
                <div class="stat-card">
                    <h3>${data.recommendedAvg.toFixed(3)}</h3>
                    <p>ì¶”ì²œ ë¦¬ë·° í‰ê· </p>
                </div>
                <div class="stat-card">
                    <h3>${data.notRecommendedAvg.toFixed(3)}</h3>
                    <p>ë¹„ì¶”ì²œ ë¦¬ë·° í‰ê· </p>
                </div>
            `;

            // ì‹œê°í™” ìƒì„±
            createVisualizations(data);

            // ë°ì´í„° í…Œì´ë¸” í‘œì‹œ
            displayDataTable(data.reviews);

            // ì„¹ì…˜ í‘œì‹œ
            document.getElementById('results-section').style.display = 'block';
            document.getElementById('visualization-section').style.display = 'block';
            document.getElementById('data-section').style.display = 'block';
        }

        // ì‹œê°í™” ìƒì„±
        function createVisualizations(data) {
            const grid = document.getElementById('visualization-grid');
            grid.innerHTML = ''; // ê¸°ì¡´ ì‹œê°í™” ì œê±°
            
            // ì¶”ì²œ ë¶„í¬
            const recommendationDiv = document.createElement('div');
            recommendationDiv.className = 'vis-card';
            recommendationDiv.innerHTML = '<h4>ì¶”ì²œ ë¶„í¬</h4><div id="rec-chart" style="height: 300px;"></div>';
            grid.appendChild(recommendationDiv);
            
            Plotly.newPlot('rec-chart', [{
                x: ['ì¶”ì²œ', 'ë¹„ì¶”ì²œ'],
                y: [data.recommended, data.notRecommended],
                type: 'bar',
                marker: { color: ['#2ecc71', '#e74c3c'] }
            }], {
                title: 'ì¶”ì²œ ë¶„í¬',
                xaxis: { title: 'ì¶”ì²œ ì—¬ë¶€' },
                yaxis: { title: 'ë¦¬ë·° ìˆ˜' }
            });

            // ê°ì • ë¶„í¬
            const sentimentDiv = document.createElement('div');
            sentimentDiv.className = 'vis-card';
            sentimentDiv.innerHTML = '<h4>ê°ì • ë ˆì´ë¸” ë¶„í¬</h4><div id="sent-chart" style="height: 300px;"></div>';
            grid.appendChild(sentimentDiv);
            
            Plotly.newPlot('sent-chart', [{
                x: ['ê¸ì •', 'ë¶€ì •', 'ì¤‘ë¦½'],
                y: [data.positive, data.negative, data.neutral],
                type: 'bar',
                marker: { color: ['#2ecc71', '#e74c3c', '#f39c12'] }
            }], {
                title: 'ê°ì • ë ˆì´ë¸” ë¶„í¬',
                xaxis: { title: 'ê°ì • ë ˆì´ë¸”' },
                yaxis: { title: 'ë¦¬ë·° ìˆ˜' }
            });

            // íŒŒì´ ì°¨íŠ¸
            const pieDiv = document.createElement('div');
            pieDiv.className = 'vis-card';
            pieDiv.innerHTML = '<h4>ê°ì • ë¶„í¬ (íŒŒì´ ì°¨íŠ¸)</h4><div id="pie-chart" style="height: 300px;"></div>';
            grid.appendChild(pieDiv);
            
            Plotly.newPlot('pie-chart', [{
                values: [data.positive, data.negative, data.neutral],
                labels: ['ê¸ì •', 'ë¶€ì •', 'ì¤‘ë¦½'],
                type: 'pie',
                marker: { colors: ['#2ecc71', '#e74c3c', '#f39c12'] }
            }], {
                title: 'ê°ì • ë¶„í¬'
            });

            // ë°•ìŠ¤ í”Œë¡¯ (ì‹¤ì œ ë°ì´í„° ì‚¬ìš©)
            if (data.reviews && data.reviews.length > 0) {
                const boxDiv = document.createElement('div');
                boxDiv.className = 'vis-card';
                boxDiv.innerHTML = '<h4>ì¶”ì²œ ì—¬ë¶€ë³„ ê°ì • ì ìˆ˜</h4><div id="box-chart" style="height: 300px;"></div>';
                grid.appendChild(boxDiv);
                
                const recommendedScores = data.reviews.filter(r => r.recommended).map(r => r.score);
                const notRecommendedScores = data.reviews.filter(r => !r.recommended).map(r => r.score);
                
                if (recommendedScores.length > 0 || notRecommendedScores.length > 0) {
                    Plotly.newPlot('box-chart', [
                        { y: recommendedScores.length > 0 ? recommendedScores : [0], type: 'box', name: 'ì¶”ì²œ', marker: { color: '#2ecc71' } },
                        { y: notRecommendedScores.length > 0 ? notRecommendedScores : [0], type: 'box', name: 'ë¹„ì¶”ì²œ', marker: { color: '#e74c3c' } }
                    ], {
                        title: 'ì¶”ì²œ ì—¬ë¶€ë³„ ê°ì • ì ìˆ˜ ë¶„í¬',
                        yaxis: { title: 'Compound Score' }
                    });
                }
            }
        }

        // ë°ì´í„° í…Œì´ë¸” í‘œì‹œ
        function displayDataTable(reviews) {
            const container = document.getElementById('data-table-container');
            let html = '<table style="width: 100%; border-collapse: collapse; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">';
            html += '<thead><tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">';
            html += '<th style="padding: 15px; text-align: left;">ë¦¬ë·° í…ìŠ¤íŠ¸</th>';
            html += '<th style="padding: 15px; text-align: left;">ì¶”ì²œ</th>';
            html += '<th style="padding: 15px; text-align: left;">ê°ì •</th>';
            html += '<th style="padding: 15px; text-align: left;">ê°ì • ì ìˆ˜</th>';
            html += '<th style="padding: 15px; text-align: left;">í”Œë ˆì´ ì‹œê°„</th>';
            html += '</tr></thead><tbody>';
            
            reviews.forEach(review => {
                const sentimentClass = review.sentiment === 'positive' ? 'sentiment-positive' : 
                                      review.sentiment === 'negative' ? 'sentiment-negative' : 'sentiment-neutral';
                const sentimentLabel = review.sentiment === 'positive' ? 'ê¸ì •' : 
                                     review.sentiment === 'negative' ? 'ë¶€ì •' : 'ì¤‘ë¦½';
                html += `<tr style="border-bottom: 1px solid #eee;">`;
                html += `<td style="padding: 12px 15px;">${review.text}</td>`;
                html += `<td style="padding: 12px 15px; color: ${review.recommended ? '#2ecc71' : '#e74c3c'}; font-weight: bold;">${review.recommended ? 'âœ“ ì¶”ì²œ' : 'âœ— ë¹„ì¶”ì²œ'}</td>`;
                html += `<td style="padding: 12px 15px;"><span class="sentiment-badge ${sentimentClass}">${sentimentLabel}</span></td>`;
                html += `<td style="padding: 12px 15px;">${review.score.toFixed(3)}</td>`;
                html += `<td style="padding: 12px 15px;">${review.playtime}ì‹œê°„</td>`;
                html += `</tr>`;
            });
            
            html += '</tbody></table>';
            container.innerHTML = html;
        }

        // Enter í‚¤ë¡œ ê²€ìƒ‰ (ì´ë¯¸ handleSearchKeyPressë¡œ ì²˜ë¦¬ë¨)
        
        // ê²€ìƒ‰ ê²°ê³¼ ì˜ì—­ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.addEventListener('click', function(event) {
            const searchResults = document.getElementById('search-results');
            const gameSearch = document.getElementById('game_search');
            const searchButton = event.target.closest('.btn');
            
            if (searchResults && searchResults.style.display !== 'none') {
                // ê²€ìƒ‰ ê²°ê³¼ ì˜ì—­ì´ë‚˜ ê²€ìƒ‰ ì…ë ¥ë€, ê²€ìƒ‰ ë²„íŠ¼ì´ ì•„ë‹Œ ê³³ì„ í´ë¦­í•œ ê²½ìš°
                if (!searchResults.contains(event.target) && 
                    event.target !== gameSearch && 
                    !searchButton) {
                    searchResults.style.display = 'none';
                }
            }
        });
    </script>
</body>
</html>
